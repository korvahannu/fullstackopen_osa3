{"version":3,"sources":["services/personServices.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newPerson","post","console","log","id","delete","put","Notification","message","className","Error","Filter","filter","inputChange_filter","value","onChange","PersonForm","props","onSubmit","submitForm","newName","inputChange_newName","newNumber","inputChange_newNumber","type","Persons","setPersons","personList","notif","map","person","name","toLowerCase","includes","number","onClick","window","confirm","personServices","per","App","useState","persons","setNewName","setNewNumber","setFilter","notification","setNotification","errorMessage","setErrorMessage","Notify","duration","setTimeout","useEffect","event","target","preventDefault","checkDouble","toLocaleLowerCase","length","updatedPerson","update","catch","error","newGuy","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2524c6d1.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst baseUrl = 'http://localhost:3001/api/persons'\r\n\r\nconst getAll = () => {\r\n\r\n    const request = axios.get(baseUrl);\r\n\r\n    return request.then(\r\n        response => response.data\r\n    );\r\n\r\n}\r\n\r\nconst addPerson = (newPerson) => {\r\n\r\n    const request = axios.post(baseUrl, newPerson);\r\n\r\n    return request.then(\r\n        response => {\r\n\t\t\tconsole.log(response.data)\r\n\t\t\treturn response.data\r\n\t\t}\r\n    );\r\n\r\n}\r\n\r\nconst deletePerson = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`);\r\n\r\n    request.then(\r\n        response => console.log(response)\r\n    );\r\n}\r\n\r\nconst updatePerson = (id, newPerson) => {\r\n    console.log(id + \" and \" + newPerson)\r\n    const request = axios.put(`${baseUrl}/${id}`, newPerson);\r\n\r\n    return request.then(response => response.data);\r\n}\r\n/* eslint import/no-anonymous-default-export: [2, {\"allowObject\": true}] */\r\nexport default {getAll, addPerson, deletePerson, updatePerson}","import React, { useState, useEffect } from 'react'\nimport personServices from './services/personServices.js'\n\nconst Notification = ({message}) => {\n  if(message === null)\n    return null;\n\n  return (\n    <div className='notification'>\n      {message}\n    </div>\n  );\n}\n\nconst Error = ({message}) => {\n  if(message === null)\n    return null;\n  \n  return (\n    <div className='error'>\n      {message}\n    </div>\n  );\n}\n\nconst Filter = ({filter, inputChange_filter}) => {\n\n  return (\n\n    <div>\n      filter shown with <input value={filter} onChange={inputChange_filter} />\n    </div>\n\n  );\n}\n\nconst PersonForm = (props) => {\n  return (\n\n    <form onSubmit={props.submitForm}>\n    <div>\n      name: <input value={props.newName} onChange={props.inputChange_newName} />\n      <br />\n      number = <input value={props.newNumber} onChange={props.inputChange_newNumber} />\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n\n  );\n}\n\nconst Persons = ({setPersons, personList, filter, notif}) => {\n\n  return(\n\n  <div>\n\n  {\n  personList.map(\n    person => {\n      if(person.name.toLowerCase().includes(filter.toLowerCase()))\n      {\n        return (\n          <div key={person.name}>\n            {person.name} {person.number}\n            <button onClick={()=> {\n              if(window.confirm(`Delete ${person.name}?`))\n              {\n                personServices.deletePerson(person.id)\n                setPersons(personList.filter(per => per.id !== person.id))\n                notif(`Deleted ${person.name}`, 5000);\n              }\n              }}>\n              delete\n            </button>\n          </div>\n        )\n      }\n      else  return(null);\n    }\n  )\n  }\n  \n  </div>\n\n  );\n}\n\nconst App = () => {\n\n  const [persons, setPersons] = useState([])\n\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n  const [filter, setFilter] = useState('');\n\n  const [notification, setNotification] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n\n  const inputChange_newName = event => setNewName(event.target.value);\n  const inputChange_newNumber = event => setNewNumber(event.target.value);\n  const inputChange_filter = event => setFilter(event.target.value);\n\n  function Notify(message, duration) {\n    setNotification(message)\n\n    setTimeout(\n      ()=>setNotification(null)\n      ,duration\n    )\n  }\n\n  function ErrorMessage(message, duration) {\n    setErrorMessage(message)\n\n    setTimeout(\n      ()=>setErrorMessage(null)\n      ,duration\n    )\n  }\n\n  const hook = () => \n  {\n    personServices.getAll()\n    .then(personList => setPersons(personList));\n  }\n\n  useEffect(hook, []);\n\n  const submitForm = (event) => {\n    event.preventDefault();\n    \n    const newPerson = {\n      name: newName,\n      number: newNumber\n    }\n\n    let checkDouble = persons.filter(person => person.name.toLowerCase() === newPerson.name.toLocaleLowerCase());\n\n    if(checkDouble.length > 0)\n    {\n      if(window.confirm(`${newPerson.name} is already added to phonebook, replace the old number with a new one?`))\n      {\n        const updatedPerson = {\n          id: checkDouble[0].id,\n          name: newPerson.name,\n          number: newPerson.number\n        }\n\n        personServices\n        .updatePerson(updatedPerson.id, updatedPerson)\n        .then (update => {\n          Notify(`Updated phonenumber of ${update.name}`, 5000);\n          setPersons(\n            persons.map(person => person.id === update.id ? update : person)\n          );\n\n        })\n        .catch(error => {\n          \n          console.log(\"HEI HEI SE OLEN MINÄ\" +  error);\n          ErrorMessage(`Information of ${newPerson.name} has already been removed from server`, 5000);\n\n          setPersons(\n            persons.filter(person => person.id !== updatedPerson.id)\n          );\n\n        });\n      }\n    }\n    else\n    {\n\t\tconsole.log(\"Adding new guy\");\n      personServices\n      .addPerson(newPerson)\n      .then(newGuy => {\n        setPersons(persons.concat(newPerson));\n        Notify(`Added ${newGuy.name}`, 5000)\n      });\n    }\n\n    setNewName(\"\");\n    setNewNumber(\"\");\n  }\n\n  // console.log(`Nykyinen on ${newName} numerolla ${newNumber}`); // Tämä on toinen tapa tulostaa muuttujia tekstin joukkoon. huom vain `` kelpaa, ei '' eikä \"\"\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      <Notification message={notification} />\n      <Error message={errorMessage} />\n\n      <Filter filter={filter} inputChange_filter={inputChange_filter} />\n\n      <h2>Add new</h2>\n\n      <PersonForm submitForm={submitForm} newName = {newName} inputChange_newName = {inputChange_newName} newNumber = {newNumber} inputChange_newNumber = {inputChange_newNumber} />\n\n      <h2>Numbers</h2>\n\n      <Persons setPersons={setPersons} notif={Notify} personList={persons} filter={filter} />\n\n\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}